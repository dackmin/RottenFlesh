<!DOCTYPE html>
<html>
    <head>
        <title>Rotten examples - RPG game</title>
    </head>
    <body>
        <script src="/build/rotten-flesh.js"></script>
        <script>

            // Register assets
            assets = [
                { name: "henry", url: "assets/henry.png" }, // Charset
                { name: "my_wonderful_world", url: "assets/map.json" }, // Map
                { name: "my_wonderful_tileset", url: "assets/green_hill.png"}, // Tileset
            ];

            // Add your game logic to onload event
            window.onload = function(){

                // Create your asset loader
                var loader = new Rotten.AssetLoader(assets);

                // Listen on progress event
                loader.listen("progress", function(e){
                    console.log("Loading " + e.loaded + "/" + e.total + " (" + e.current + ")");
                });

                // Listen on loaded event
                loader.listen("loaded", function(){
                    console.log("Game is loaded ");

                    // Create main game
                    var game = new Rotten.Game();

                    // Create main scene
                    var main_scene = new Rotten.Scene(game);

                    // Create main map
                    var map = new Rotten.Drawables.TiledMap("my_wonderful_world", 64, 64);
                    map.addTileset("green_hill", "my_wonderful_tileset");

                    // Create a spritesheet
                    var henry = new Rotten.Drawables.SpriteSheet("henry", 32, 32);

                    // Add things to scene by order of appearance
                    main_scene.addExisting(map);
                    main_scene.addExisting(henry);

                    // Add scene to game
                    game.addScene("main_scene", main_scene);

                    // Start game !
                    game.start("main_scene");
                })

                // Load everything
                loader.load();
            };
        </script>
    </body>
</html>
